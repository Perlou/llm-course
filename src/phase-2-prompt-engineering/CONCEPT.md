# 提示词工程完全指南

## 📖 目录

- [第一章：基础概念](#第一章基础概念)
- [第二章：核心原则](#第二章核心原则)
- [第三章：基础技术](#第三章基础技术)
- [第四章：高级技术](#第四章高级技术)
- [第五章：实战案例](#第五章实战案例)
- [第六章：常见问题与优化](#第六章常见问题与优化)
- [第七章：工具与资源](#第七章工具与资源)
- [第八章：未来趋势](#第八章未来趋势)

---

## 第一章：基础概念

### 1.1 什么是提示词工程？

**提示词工程（Prompt Engineering）** 是一门设计和优化输入文本（提示词/Prompt）的技术与艺术，旨在引导大型语言模型（LLM）生成期望输出的系统性方法。

```
┌─────────────────────────────────────────────────────────┐
│                    提示词工程流程                         │
├─────────────────────────────────────────────────────────┤
│                                                         │
│   用户意图  →  提示词设计  →  LLM处理  →  输出结果        │
│      ↑                                      │           │
│      └──────────── 评估与迭代 ←─────────────┘           │
│                                                         │
└─────────────────────────────────────────────────────────┘
```

### 1.2 为什么提示词工程重要？

| 方面         | 影响                           |
| ------------ | ------------------------------ |
| **输出质量** | 好的提示词可将输出质量提升数倍 |
| **效率提升** | 减少来回修正的次数             |
| **成本控制** | 减少Token消耗，降低API调用成本 |
| **一致性**   | 确保输出格式和风格的一致性     |
| **解锁能力** | 挖掘模型的隐藏潜力             |

### 1.3 提示词的基本结构

一个完整的提示词通常包含以下组成部分：

```markdown
┌─────────────────────────────────────────┐
│ 完整提示词结构 │
├─────────────────────────────────────────┤
│ 1. 角色设定 (Role) │
│ └─ 定义AI应该扮演的角色 │
│ │
│ 2. 上下文 (Context) │
│ └─ 提供背景信息和约束条件 │
│ │
│ 3. 任务指令 (Instruction) │
│ └─ 明确说明需要完成的任务 │
│ │
│ 4. 输入数据 (Input) │
│ └─ 需要处理的具体内容 │
│ │
│ 5. 输出格式 (Output Format) │
│ └─ 期望的输出格式和结构 │
│ │
│ 6. 示例 (Examples) [可选] │
│ └─ 输入输出的参考示例 │
└─────────────────────────────────────────┘
```

**示例：**

````markdown
# 角色设定

你是一位资深的Python技术专家，擅长代码审查和优化。

# 上下文

我正在开发一个高并发的Web应用，需要确保代码质量和性能。

# 任务指令

请审查以下代码，指出问题并提供优化建议。

# 输入数据

```python
def get_user(id):
    users = db.query("SELECT * FROM users")
    for user in users:
        if user.id == id:
            return user
    return None
```
````

# 输出格式

请按以下格式输出：

1. 问题列表（按严重程度排序）
2. 优化后的代码
3. 优化说明

```

---

## 第二章：核心原则

### 2.1 CLEAR 原则

```

C - Clear（清晰） : 使用明确、无歧义的语言
L - Logical（逻辑） : 保持逻辑连贯性
E - Explicit（明确） : 明确说明期望的输出
A - Adaptive（适应） : 根据结果调整优化
R - Relevant（相关） : 只包含相关信息

````

### 2.2 指令设计的黄金法则

#### 法则一：具体而非模糊

```markdown
❌ 不好的示例：
"帮我写点东西介绍人工智能"

✅ 好的示例：
"请撰写一篇800字的科普文章，面向没有技术背景的读者，
介绍人工智能的三个核心概念：机器学习、深度学习和神经网络。
使用生活中的类比来解释这些概念。"
````

#### 法则二：分步骤拆解复杂任务

```markdown
❌ 不好的示例：
"分析这份销售数据并给我建议"

✅ 好的示例：
"请按以下步骤分析这份销售数据：

1. 首先，识别销售额前5名和后5名的产品
2. 然后，分析月度销售趋势，找出增长和下降的模式
3. 接着，计算各产品类别的销售占比
4. 最后，基于分析结果，给出3条可执行的业务建议"
```

#### 法则三：提供充分的上下文

```markdown
❌ 不好的示例：
"翻译这段话"

✅ 好的示例：
"请将以下技术文档从英语翻译成简体中文。
目标读者是初级软件开发者。
保持专业术语的准确性，对于无通用中文译名的术语，
保留英文原词并在括号中给出解释。"
```

### 2.3 约束与边界设定

```markdown
# 内容约束

- 字数限制：控制输出长度
- 主题范围：限定讨论范围
- 排除内容：明确不应包含的内容

# 格式约束

- 结构要求：标题、段落、列表等
- 语言风格：正式/非正式、技术/通俗
- 特殊格式：JSON、表格、代码等

# 质量约束

- 准确性要求
- 原创性要求
- 引用要求
```

---

## 第三章：基础技术

### 3.1 零样本提示（Zero-Shot Prompting）

不提供任何示例，直接让模型执行任务。

```markdown
# 示例

请将以下句子分类为"积极"、"消极"或"中性"：
"这家餐厅的服务态度真的很棒！"

分类结果：
```

**适用场景：**

- 简单任务
- 模型已有相关知识
- 快速原型验证

### 3.2 少样本提示（Few-Shot Prompting）

提供少量示例来引导模型理解任务模式。

```markdown
# 示例

请根据以下示例，将句子分类：

示例1：
输入："这个产品太差了，完全是浪费钱"
输出：消极

示例2：
输入："今天天气不错，适合出门"
输出：积极

示例3：
输入："会议定在下午三点"
输出：中性

现在请分类：
输入："这次更新让软件变得更难用了"
输出：
```

**最佳实践：**

| 要素       | 建议                 |
| ---------- | -------------------- |
| 示例数量   | 通常3-5个效果最佳    |
| 示例多样性 | 覆盖不同类型的情况   |
| 示例质量   | 确保示例准确无误     |
| 示例顺序   | 可能影响结果，需测试 |

### 3.3 角色提示（Role Prompting）

让模型扮演特定角色来影响其回答风格和知识运用。

```markdown
# 基础角色设定

你是一位有20年经验的心理咨询师，擅长认知行为疗法。
请以温和、专业且富有同理心的方式回答问题。

# 复合角色设定

你是一位具备以下特质的AI助手：

- 专业背景：计算机科学博士，专攻机器学习
- 沟通风格：耐心、善于用类比解释复杂概念
- 价值观：注重实用性，强调代码可维护性
- 局限性：会坦诚承认不确定的地方
```

### 3.4 指令提示（Instruction Prompting）

直接给出明确的任务指令。

```markdown
# 简单指令

总结以下文章的主要观点，限制在100字以内。

# 复合指令

请执行以下任务：

1. 阅读下面的用户反馈
2. 提取关键问题点
3. 按优先级排序
4. 为每个问题提供解决方案建议
```

---

## 第四章：高级技术

### 4.1 思维链提示（Chain-of-Thought, CoT）

引导模型展示推理过程，提高复杂问题的解决能力。

```markdown
# 标准CoT

问题：一个商店有15个苹果，卖掉了7个，又进货了12个，现在有多少个苹果？

请一步步思考后给出答案。

# 期望的回答模式

让我一步步思考：

1. 开始时有15个苹果
2. 卖掉7个后：15 - 7 = 8个
3. 进货12个后：8 + 12 = 20个
   答案：现在有20个苹果
```

#### 零样本CoT

```markdown
问题：[复杂问题描述]

让我们一步一步思考这个问题。（Let's think step by step.）
```

#### 自动CoT（Auto-CoT）

```markdown
问题：[复杂问题描述]

在回答之前，请：

1. 分析问题的关键组成部分
2. 识别解决问题需要的步骤
3. 按逻辑顺序展示推理过程
4. 验证你的推理是否正确
5. 给出最终答案
```

### 4.2 自我一致性（Self-Consistency）

通过多次采样和投票机制提高答案可靠性。

```markdown
# 实现方式

对同一问题，使用较高温度参数生成多个答案，
然后选择出现频率最高的答案。

# 伪代码示例

answers = []
for i in range(5):
response = llm.generate(prompt, temperature=0.7)
answers.append(extract_answer(response))

final_answer = majority_vote(answers)
```

### 4.3 思维树（Tree of Thoughts, ToT）

探索多个推理路径，通过评估和回溯找到最优解。

```markdown
# 思维树结构

                    [初始问题]
                        │
          ┌─────────────┼─────────────┐
          ▼             ▼             ▼
       [思路A]       [思路B]       [思路C]
          │             │             │
       评估:3分      评估:7分      评估:5分
                        │
                   ┌────┼────┐
                   ▼    ▼    ▼
                [B1]  [B2]  [B3]
                评估   评估   评估
                   ...
```

**提示词模板：**

```markdown
问题：[复杂问题描述]

请使用以下思考框架：

## 步骤1：生成初始思路

列出3种不同的解决方案/思考方向

## 步骤2：评估每个思路

对每个思路进行评估（1-10分），考虑：

- 可行性
- 效率
- 风险

## 步骤3：深入发展最优思路

选择评分最高的思路，进一步细化

## 步骤4：如遇死路，回溯尝试其他路径

## 步骤5：综合得出最终答案
```

### 4.4 ReAct（推理+行动）

结合推理和行动的交互式问题解决模式。

```markdown
# ReAct 模式

Thought: 我需要理解问题并制定计划
Action: 搜索相关信息
Observation: [搜索结果]
Thought: 基于这些信息，我应该...
Action: 执行下一步操作
Observation: [操作结果]
... (循环)
Thought: 我现在有足够信息得出结论
Answer: [最终答案]
```

### 4.5 检索增强生成（RAG）提示

将外部知识整合到提示中。

```markdown
# RAG 提示模板

## 参考资料

以下是与你的问题相关的信息：

"""
[检索到的文档片段1]
"""

"""
[检索到的文档片段2]
"""

## 任务

基于上述参考资料，请回答以下问题：
[用户问题]

## 要求

1. 答案必须基于提供的参考资料
2. 如果资料不足以回答，请明确说明
3. 引用具体的信息来源
```

### 4.6 元提示（Meta-Prompting）

让AI帮助设计和优化提示词。

```markdown
# 元提示示例

我需要创建一个提示词来完成以下任务：
[任务描述]

目标受众：[描述]
期望输出：[描述]
关键约束：[列出]

请帮我设计一个高效的提示词，并解释设计理由。
```

---

## 第五章：实战案例

### 5.1 代码开发助手

```markdown
# 系统提示词

你是一位高级软件工程师，专精于：

- 语言：Python, JavaScript, Go
- 领域：Web开发、数据处理、API设计
- 理念：Clean Code, SOLID原则, 测试驱动开发

## 回答规范

1. 代码必须包含清晰的注释
2. 提供时间和空间复杂度分析
3. 指出潜在的边界情况
4. 如适用，提供单元测试示例

## 格式要求

- 代码块使用适当的语言标记
- 重要概念用**粗体**强调
- 复杂逻辑用流程图或伪代码说明

---

# 用户请求

请帮我实现一个线程安全的LRU缓存，支持：

- get(key): 获取值
- put(key, value): 设置值
- 容量限制
- O(1) 时间复杂度
```

### 5.2 数据分析报告

```markdown
# 角色与背景

你是一位数据分析专家，正在为公司高管准备季度分析报告。

# 数据

[粘贴CSV数据或数据描述]

# 分析任务

请完成以下分析：

### 1. 描述性统计

- 关键指标的汇总统计
- 数据分布特征

### 2. 趋势分析

- 识别主要趋势
- 环比/同比变化

### 3. 异常检测

- 标识异常数据点
- 分析可能原因

### 4. 可视化建议

- 推荐适合的图表类型
- 说明为什么选择这些图表

### 5. 行动建议

- 基于分析的3-5条业务建议
- 按优先级排序

# 输出格式

使用Markdown格式，包含表格和清晰的标题层级。
语言风格：专业但易于理解，适合非技术背景的高管阅读。
```

### 5.3 内容创作助手

```markdown
# 写作任务配置

## 基本信息

- 内容类型：技术博客文章
- 主题：Kubernetes入门指南
- 目标读者：有基础编程经验但不熟悉容器技术的开发者
- 期望长度：2000-2500字

## 写作风格

- 语气：友好、专业
- 技术深度：入门级，逐步深入
- 使用类比：用日常生活场景解释技术概念
- 代码示例：提供简单可运行的示例

## 文章结构要求

1. 引人入胜的开头（为什么要学K8s）
2. 核心概念解释（Pod, Service, Deployment）
3. 动手实践部分（step-by-step教程）
4. 常见问题解答
5. 下一步学习建议

## SEO要求

- 包含关键词：Kubernetes教程、K8s入门、容器编排
- 设计吸引点击的标题
- 包含结构化的小标题
```

### 5.4 对话式AI客服

```markdown
# 系统提示词

## 角色定义

你是[公司名称]的AI客服助理"小智"，负责处理客户咨询。

## 公司信息

- 业务：在线教育平台
- 主要产品：编程课程、职业发展培训
- 工作时间：24/7在线
- 转人工条件：复杂投诉、退款请求、技术故障

## 对话原则

1. 开场：热情问候，询问如何帮助
2. 倾听：确认理解客户问题
3. 解决：提供清晰的解决方案
4. 确认：询问是否解决问题
5. 结束：友好告别，邀请评价

## 话术示例

- 问候："您好！我是小智，很高兴为您服务。请问有什么可以帮您的？"
- 无法解决："抱歉这个问题需要人工客服处理，我马上为您转接..."
- 结束："感谢您的咨询！如果还有其他问题，随时找我~"

## 知识库

[常见问题及标准回答]

## 禁止事项

- 不得承诺超出权限的内容
- 不得泄露内部信息
- 不得使用负面或推卸责任的语言
```

### 5.5 学术论文助手

```markdown
# 学术写作辅助

## 任务类型：[选择一项]

- [ ] 文献综述撰写
- [ ] 研究方法设计
- [ ] 数据分析解释
- [ ] 论文润色修改
- [x] 论文结构建议

## 研究信息

- 学科领域：计算机科学 - 自然语言处理
- 研究问题：如何提高低资源语言的机器翻译质量
- 目标期刊/会议：ACL 2024
- 现有进展：[描述]

## 具体需求

请帮我设计论文的整体结构，包括：

1. 各章节的标题建议
2. 每个部分应包含的内容要点
3. 各部分的建议篇幅比例
4. 需要注意的学术写作规范

## 写作风格

- 学术正式写作
- 符合ACL格式要求
- 逻辑严谨，表述精确
```

---

## 第六章：常见问题与优化

### 6.1 问题诊断清单

| 问题           | 可能原因     | 解决方案                   |
| -------------- | ------------ | -------------------------- |
| 输出太长或太短 | 缺少长度约束 | 明确指定字数/段落数        |
| 答非所问       | 指令不清晰   | 重新组织，使用分步指令     |
| 内容重复       | 缺乏结构约束 | 提供大纲或格式模板         |
| 风格不一致     | 角色设定模糊 | 强化角色描述和示例         |
| 包含错误信息   | 模型幻觉     | 要求引用来源，增加验证步骤 |
| 格式不符合要求 | 格式说明不够 | 提供具体示例               |
| 缺乏深度       | 任务过于宽泛 | 拆分任务，逐步深入         |

### 6.2 提示词优化流程

```
┌──────────────────────────────────────────────────────────────┐
│                     提示词优化迭代流程                         │
├──────────────────────────────────────────────────────────────┤
│                                                              │
│   ┌─────────┐   ┌─────────┐   ┌─────────┐   ┌─────────┐     │
│   │ 初始版本 │ → │  测试   │ → │  评估   │ → │  分析   │     │
│   └─────────┘   └─────────┘   └─────────┘   └─────────┘     │
│        ↑                                         │          │
│        │         ┌─────────┐   ┌─────────┐       │          │
│        └─────────│  优化   │ ← │ 识别问题 │ ←────┘          │
│                  └─────────┘   └─────────┘                  │
│                                                              │
└──────────────────────────────────────────────────────────────┘
```

### 6.3 A/B测试框架

```markdown
# 提示词A/B测试记录

## 测试信息

- 测试日期：2024-XX-XX
- 测试目标：提高代码生成的准确性
- 测试样本：20个不同难度的编程问题

## 变量对照

### 版本A（对照组）
```

请用Python实现[功能]

```

### 版本B（实验组）
```

请用Python实现[功能]
要求：

1. 包含类型注解
2. 添加docstring
3. 考虑边界情况
4. 时间复杂度不超过O(n log n)

```

## 评估指标
| 指标 | 版本A | 版本B | 提升 |
|------|-------|-------|------|
| 正确率 | 65% | 85% | +20% |
| 代码质量分 | 6.2 | 8.1 | +1.9 |
| 平均Token | 150 | 280 | +130 |

## 结论
版本B在准确性和质量方面显著提升，虽然Token消耗增加，
但投入产出比更优。建议采用版本B。
```

### 6.4 处理模型幻觉

```markdown
# 减少幻觉的策略

## 策略1：强制引用

"请基于以下提供的信息回答，如果信息不足，请明确说明'根据提供的信息无法确定'"

## 策略2：置信度声明

"在回答时，请标注你的确定程度：

- [高度确定]：有明确依据
- [较为确定]：有相关知识支持
- [不确定]：推测或可能不准确"

## 策略3：自我验证

"在给出答案后，请：

1. 检查答案是否与问题相关
2. 验证答案中的事实是否可能有误
3. 如有不确定之处，明确标注"

## 策略4：限制范围

"只回答关于[特定主题]的问题，对于超出范围的内容，
请回复：'这超出了我的知识范围，建议咨询专业人士'"
```

---

## 第七章：工具与资源

### 7.1 提示词管理工具

| 工具名称        | 用途           | 特点                 |
| --------------- | -------------- | -------------------- |
| **LangChain**   | 提示词模板管理 | 支持变量、链式调用   |
| **Promptfoo**   | 提示词测试     | 自动化评估、对比测试 |
| **PromptLayer** | 提示词监控     | 日志记录、版本管理   |
| **OpenPrompt**  | 学术研究       | 标准化提示词框架     |

### 7.2 提示词模板库

```markdown
# 通用模板结构

## 模板1：分析任务

"""
作为[领域]专家，请分析以下[内容类型]：

{input}

分析维度：

1. [维度1]
2. [维度2]
3. [维度3]

输出格式：[格式要求]
"""

## 模板2：创作任务

"""
请创作一篇[内容类型]，主题是[主题]。

目标读者：[描述]
风格：[风格要求]
长度：[字数要求]
特殊要求：[列出]

参考素材：
{materials}
"""

## 模板3：问答任务

"""
基于以下上下文回答问题：

上下文：
{context}

问题：{question}

回答要求：

- 直接回答问题
- 如果上下文不足以回答，说明原因
- 必要时提供额外相关信息
  """
```

### 7.3 评估指标

```markdown
# 提示词效果评估框架

## 定量指标

1. **准确性** - 答案的正确程度
2. **完整性** - 是否涵盖所有要点
3. **一致性** - 多次执行的结果稳定性
4. **效率** - Token消耗和响应时间

## 定性指标

1. **相关性** - 与问题的匹配度
2. **可读性** - 输出的易理解程度
3. **专业性** - 领域知识的运用
4. **创造性** - 在创意任务中的表现

## 评分模板

| 维度     | 权重 | 得分(1-10) | 加权分 |
| -------- | ---- | ---------- | ------ |
| 准确性   | 30%  |            |        |
| 完整性   | 25%  |            |        |
| 相关性   | 20%  |            |        |
| 可读性   | 15%  |            |        |
| 效率     | 10%  |            |        |
| **总分** | 100% |            |        |
```

---

## 第八章：未来趋势

### 8.1 发展方向

```
┌────────────────────────────────────────────────────────────────┐
│                    提示词工程未来趋势                            │
├────────────────────────────────────────────────────────────────┤
│                                                                │
│  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐            │
│  │  自动化提示  │  │  多模态提示  │  │  个性化提示  │            │
│  │  词优化     │  │  词设计     │  │  词系统     │            │
│  └──────┬──────┘  └──────┬──────┘  └──────┬──────┘            │
│         │                │                │                    │
│         ▼                ▼                ▼                    │
│  AI自动生成并      结合图像、音频、    根据用户特征             │
│  优化提示词        视频的综合提示      动态调整提示             │
│                                                                │
│  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐            │
│  │  Agent系统  │  │  可解释提示  │  │  安全对齐   │            │
│  │  的提示设计  │  │  词工程     │  │  提示技术   │            │
│  └──────┬──────┘  └──────┬──────┘  └──────┬──────┘            │
│         │                │                │                    │
│         ▼                ▼                ▼                    │
│  设计复杂的多      理解提示词如何      防止误用和              │
│  步骤任务流程      影响模型行为        有害输出                │
│                                                                │
└────────────────────────────────────────────────────────────────┘
```

### 8.2 学习路线图

```markdown
# 提示词工程学习路线

## 阶段1：入门（1-2周）

- [ ] 理解大型语言模型基本原理
- [ ] 掌握基础提示技术（零样本、少样本）
- [ ] 练习角色设定和指令设计
- [ ] 完成10个简单任务的提示词设计

## 阶段2：进阶（2-4周）

- [ ] 学习思维链等高级技术
- [ ] 理解不同模型的特点和差异
- [ ] 掌握提示词调试和优化方法
- [ ] 完成5个复杂场景的提示词系统设计

## 阶段3：专精（1-2月）

- [ ] 深入研究特定领域的提示词技术
- [ ] 学习提示词工程的工具和框架
- [ ] 建立个人提示词库
- [ ] 参与开源项目或发表技术文章

## 阶段4：专家（持续）

- [ ] 跟踪最新研究和技术发展
- [ ] 探索提示词与其他技术的结合
- [ ] 指导他人和分享经验
- [ ] 贡献行业最佳实践
```

---

## 附录

### A. 快速参考卡片

```markdown
┌─────────────────────────────────────────────────────────────┐
│ 提示词设计速查表 │
├─────────────────────────────────────────────────────────────┤
│ │
│ ✅ 要做的： ❌ 避免的： │
│ • 清晰具体的指令 • 模糊的描述 │
│ • 提供充分上下文 • 假设模型知道背景 │
│ • 指定输出格式 • 开放式的格式 │
│ • 分步骤拆解任务 • 一次性提大而复杂的要求 │
│ • 使用示例引导 • 仅依赖抽象指令 │
│ • 设定合理约束 • 无限制的自由发挥 │
│ • 迭代优化提示 • 期望一次完美 │
│ │
├─────────────────────────────────────────────────────────────┤
│ │
│ 结构模板：角色 + 上下文 + 任务 + 格式 + 示例 + 约束 │
│ │
└─────────────────────────────────────────────────────────────┘
```

### B. 术语表

| 术语       | 英文             | 解释                     |
| ---------- | ---------------- | ------------------------ |
| 提示词     | Prompt           | 输入给AI模型的指令或问题 |
| 零样本     | Zero-Shot        | 不提供示例直接执行任务   |
| 少样本     | Few-Shot         | 提供少量示例引导模型     |
| 思维链     | Chain-of-Thought | 展示推理过程的提示技术   |
| 温度       | Temperature      | 控制输出随机性的参数     |
| Token      | Token            | 模型处理的基本文本单位   |
| 幻觉       | Hallucination    | 模型生成虚假信息的现象   |
| 上下文窗口 | Context Window   | 模型可处理的最大Token数  |

---

## 结语

提示词工程是一门不断发展的学科，需要持续学习和实践。记住：

> **好的提示词 = 清晰的意图 + 充分的上下文 + 明确的约束 + 持续的优化**

祝你在提示词工程的道路上不断精进！

---

_文档版本：1.0_  
_最后更新：2024年_  
_作者：Claude AI Assistant_
