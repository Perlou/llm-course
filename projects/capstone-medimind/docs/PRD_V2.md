# MediMind 第二期 - 产品需求文档 (PRD v2.0)

> 版本: v2.0  
> 更新日期: 2026-02-04  
> 前置依赖: 第一期核心功能完成

---

## 1. 版本概述

### 1.1 版本目标

在第一期核心功能基础上，增加用户体系和增值服务，提升用户粘性和服务价值。

### 1.2 核心价值

- **个性化体验** - 用户登录后获得定制化服务
- **数据沉淀** - 健康档案助力长期健康管理
- **便捷就医** - 医院推荐缩短就医路径
- **持续关怀** - 慢病管理提醒提供持续服务

---

## 2. 功能需求

### 2.1 用户认证系统 (Phase 11)

| 功能项     | 描述            | 优先级 |
| ---------- | --------------- | ------ |
| 邮箱注册   | 邮箱 + 密码注册 | P0     |
| 邮箱登录   | 邮箱 + 密码登录 | P0     |
| 微信登录   | OAuth 快捷登录  | P1     |
| Token 管理 | JWT 认证机制    | P0     |
| 密码重置   | 邮件验证码重置  | P1     |
| 个人信息   | 昵称、头像管理  | P0     |

**技术方案**:

- JWT Token (有效期 7 天)
- bcrypt/PBKDF2 密码哈希
- Redis 存储 Token 黑名单 (可选)

---

### 2.2 健康档案管理 (Phase 12)

| 功能项   | 描述                   | 优先级 |
| -------- | ---------------------- | ------ |
| 基础信息 | 性别、年龄、身高、体重 | P0     |
| 健康指标 | 血压、血糖、心率记录   | P0     |
| 指标趋势 | 历史数据图表展示       | P1     |
| 报告归档 | 历史报告解读记录       | P1     |
| 问诊记录 | 健康问答历史沉淀       | P1     |

**数据模型**:

```
HealthProfile
├── user_id
├── gender (male/female)
├── birth_date
├── height_cm
└── weight_kg

HealthRecord
├── user_id
├── record_type (血压/血糖/心率/体重)
├── value
├── recorded_at
└── notes
```

---

### 2.3 医院/医生推荐 (Phase 13)

| 功能项   | 描述                 | 优先级 |
| -------- | -------------------- | ------ |
| 医院搜索 | 按名称/地区搜索      | P0     |
| 科室匹配 | 基于导诊结果推荐科室 | P0     |
| 距离排序 | 按用户位置排序       | P1     |
| 医院详情 | 等级、地址、电话     | P0     |

**数据来源**:

- 国家卫健委医院名录
- 高德/百度地图 API (定位)

---

### 2.4 慢病管理提醒 (Phase 14)

| 功能项   | 描述             | 优先级 |
| -------- | ---------------- | ------ |
| 用药提醒 | 定时服药提醒     | P0     |
| 复诊提醒 | 定期复查提醒     | P0     |
| 指标记录 | 提醒记录健康指标 | P1     |
| 推送通知 | Web Push 通知    | P1     |

---

### 2.5 移动端适配 (Phase 15)

| 功能项     | 描述             | 优先级 |
| ---------- | ---------------- | ------ |
| 响应式布局 | 适配手机/平板    | P0     |
| PWA 支持   | 可安装到桌面     | P1     |
| 离线功能   | 基础功能离线可用 | P2     |

---

## 3. 非功能需求

### 3.1 安全需求

| 指标       | 要求                         |
| ---------- | ---------------------------- |
| 密码存储   | 使用 bcrypt/PBKDF2 哈希      |
| Token 安全 | HTTPS 传输 + HttpOnly Cookie |
| 数据加密   | 敏感数据加密存储             |
| 隐私合规   | 符合个人信息保护法           |

### 3.2 性能需求

| 指标     | 要求    |
| -------- | ------- |
| 登录响应 | < 500ms |
| 数据加载 | < 1s    |

---

## 4. 用户界面设计

### 4.1 新增页面

| 页面     | 路由            | 说明          |
| -------- | --------------- | ------------- |
| 登录页   | /login          | 邮箱/微信登录 |
| 注册页   | /register       | 新用户注册    |
| 个人中心 | /profile        | 个人信息管理  |
| 健康档案 | /health-records | 健康数据管理  |
| 医院列表 | /hospitals      | 医院搜索推荐  |
| 提醒设置 | /reminders      | 用药/复诊提醒 |

### 4.2 交互优化

- 未登录用户可使用核心功能，但无法保存历史
- 登录后自动同步历史记录
- 移动端底部导航适配

---

## 5. 验收标准

### 5.1 功能验收

- [ ] 用户可以注册/登录/登出
- [ ] 登录后可查看个人信息
- [ ] 可以记录和查看健康指标
- [ ] 导诊后可推荐附近医院
- [ ] 可设置用药/复诊提醒
- [ ] 移动端正常显示和操作

### 5.2 安全验收

- [ ] 密码正确加密存储
- [ ] Token 过期后需重新登录
- [ ] 无法访问他人数据

---

## 6. 项目计划

| Phase    | 功能          | 预计工期 |
| -------- | ------------- | -------- |
| 11       | 用户认证系统  | 8h       |
| 12       | 健康档案管理  | 10h      |
| 13       | 医院/医生推荐 | 6h       |
| 14       | 慢病管理提醒  | 8h       |
| 15       | 移动端适配    | 4h       |
| **总计** |               | **~36h** |

---

## 7. 风险评估

| 风险           | 可能性 | 影响 | 缓解措施            |
| -------------- | ------ | ---- | ------------------- |
| 用户数据泄露   | 低     | 高   | 加密存储 + 权限控制 |
| 医院数据准确性 | 中     | 中   | 使用官方数据源      |
| 推送通知失败   | 中     | 低   | 多渠道通知          |
